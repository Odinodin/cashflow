{% extends "public/templates/base.html" %}

{% block content %}

<script type="text/javascript">

  var deleteTag = function (tagName) {

    var client = new XMLHttpRequest();

    client.open("DELETE", "/tags/" + tagName, false);
    client.send();

    if (client.status == 200)
      location.reload();
    else
      alert("The request did not succeed!\n\nThe response status was: " + client.status + " " + client.statusText + ".");
  }
</script>

<div class="container-box bg-box">
  <h3>Add tag</h3>

  <form action="/tags" method="POST">
    <label>Tag name: </label>
    <input name="name" type="text"/>
    <label>Regexes: </label>
    <input name="regexes" type="text"/>
    <input type="submit" value="Add"/>
  </form>
</div>

<table class="bg-box">
  <thead>
  <tr>
    <th>Delete</th>
    <th>Tag</th>
    <th>Regexes</th>
  </tr>
  </thead>
  {% for tag in tags %}
  <tbody>
  <tr>
    <td>
      <button onclick="deleteTag('{{tag.name}}')">x</button>
    </td>
    <td>
      <div class="tag">{{tag.name}}</div>
    </td>
    <td>{{tag.regexes}}</td>
  </tr>
  </tbody>
  {% endfor %}
</table>

{% endblock }