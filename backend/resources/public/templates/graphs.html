{% extends "public/templates/base.html" %}

{% block content %}
<script type="text/javascript">
  var filterByMonth = function (yearIndex, monthIndex) {
    window.location.href = '/graphs/' + yearIndex + "/" + monthIndex;
  }
</script>

<div id="time_filter">
  <div id="year">
    2009
  </div>
  <div id="months">
    <div><button onclick="filterByMonth(2009, 1)">January</button></div>
    <div><button onclick="filterByMonth(2009, 2)">February</button></div>
    <div><button onclick="filterByMonth(2009, 3)">March</button></div>
    <div><button onclick="filterByMonth(2009, 4)">April</button></div>
    <div><button onclick="filterByMonth(2009, 5)">May</button></div>
    <div><button onclick="filterByMonth(2009, 6)">June</button></div>
    <div><button onclick="filterByMonth(2009, 7)">July</button></div>
    <div><button onclick="filterByMonth(2009, 8)">August</button></div>
    <div><button onclick="filterByMonth(2009, 9)">September</button></div>
    <div><button onclick="filterByMonth(2009, 10)">October</button></div>
    <div><button onclick="filterByMonth(2009, 11)">November</button></div>
    <div><button onclick="filterByMonth(2009, 12)">December</button></div>
  </div>
</div>

<div id="graph" style="width:100%; height:400px;">


</div>
<script src="/public/js/highcharts-custom.js" type="text/javascript"></script>
<script src="/public/js/cull.js" type="text/javascript"></script>
<script type="text/javascript">
  var sumByTagJson = '{{sum-by-tag|json|safe}}';
</script>

<script type="text/javascript">
  console.log("loaded", sumByTagJson);

    var jsonToSumByTag = function (json) {
      return cull.map(function (tagWithSum) {
        return [tagWithSum.tagname, tagWithSum.sum * -1];
      } , JSON.parse(json));
    };

    var chart = new Highcharts.Chart({
    chart: {
      type: 'column',
      renderTo: 'graph'
    },
    xAxis: {
      type: 'category'
    },
    series: [{
      name: 'Tags',
      data: jsonToSumByTag(sumByTagJson),
      dataLabels : {
        enabled: true,
        color: "#000000"
      }
    }]
  });

</script>



{% endblock }