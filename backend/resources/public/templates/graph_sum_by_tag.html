{% extends "public/templates/base.html" %}

{% block content %}

{% include "public/templates/time_filter.html" with route="/graphs/sum-by-tag/" %}

<div id="graph_type">
  <button onclick="window.location.href = '/graphs/in-out';">In and out</button>
  <button onclick="">Totals</button>
  <button onclick=""></button>
  </div>
</div>

<div id="graph" style="width:100%; height:400px;"></div>
<script src="/public/js/highcharts-custom.js" type="text/javascript"></script>
<script src="/public/js/cull.js" type="text/javascript"></script>
<script type="text/javascript">
  var sumByTagJson = '{{sum-by-tag|json|safe}}';

  var jsonToSumByTag = function (json) {
    return cull.map(function (tagWithSum) {
      return [tagWithSum.tagname, tagWithSum.sum * -1];
    }, JSON.parse(json));
  };

  var chart = new Highcharts.Chart({
    chart: {
      type: 'column',
      renderTo: 'graph'
    },
    xAxis: {
      type: 'category'
    },
    series: [
      {
        name: 'Tags',
        data: jsonToSumByTag(sumByTagJson),
        dataLabels: {
          enabled: true,
          color: "#000000"
        }
      }
    ]
  });

</script>

{% endblock }